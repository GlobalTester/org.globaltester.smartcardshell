<!-- #BeginTemplate "template.dwt" -->
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!-- #BeginEditable "TITLE" -->
<title>Smart Card Shell 3</title>
<!-- #EndEditable -->
<link rel=stylesheet type="text/css" href="style.css">
<meta name="author" content="Andreas Schwier">
</head>
<body>
<div align="left"><a href="http://www.cardcontact.de"><img src="banner.jpg" width="750" height="80" border="0"></a></div>
<div id="navigator">
    <p><b>Smart Card<br>Shell 3</b></p>
    <a href="index.html">Home</a><br><br>
    <a href="gperror.html">GPError</a><br>
    <a href="gpsystem.html">GPSystem</a><br>
    <a href="bytestring.html">ByteString</a><br>
    <a href="bytebuffer.html">ByteBuffer</a><br>
    <a href="tlv.html">TLV</a><br>
    <a href="tlvlist.html">TLVList</a><br>
    <a href="card.html">Card</a><br>
    <a href="atr.html">Atr</a><br>
    <a href="key.html">Key</a><br>
    <a href="crypto.html">Crypto</a><br>
    <a href="application.html">Application</a><br>
    <a href="gpapplication.html">GPApplication</a><br>
    <a href="gpsecuritydomain.html">GPSecDomain</a><br>
    <br>
    <a href="asn1.html">ASN1</a><br>
    <a href="cardfile.html">CardFile</a><br>
    <a href="isosecurechannel.html">IsoSecureChannel</a><br>
    <a href="applicationfactory.html">ApplFactory</a><br>
    <a href="gpxml.html">GPXML</a><br>
    <a href="jsscript.html">JsScript</a><br>
    <a href="cardsimulationadapter.html">CardSim</a><br>
    <br>
    <a href="x509.html">X509</a><br>
    <a href="crl.html">CRL</a><br>
    <a href="keystore.html">KeyStore</a><br>
    <a href="cmssigneddata.html">CMSSignedData</a><br>
    <a href="cmsgenerator.html">CMSGenerator</a><br>
    <a href="xmlsignature.html">XMLSignature</a><br>
    <a href="ocspquery.html">OCSPQuery</a><br>
    <a href="ldap.html">LDAP</a><br>
    <a href="soapconnection.html">SOAP</a><br>
    <a href="urlconnection.html">URLConnection</a><br>
    <br>
    <a href="pkcs11provider.html">PKCS11Provider</a><br>
    <a href="pkcs11session.html">PKCS11Session</a><br>
    <a href="pkcs11object.html">PKCS11Object</a><br>
    <br>
    <a href="outlinenode.html">OutlineNode</a><br>
    <a href="dialog.html">Dialog</a><br>
    <br>
    <a href="jsdoc/index.html">Tools</a><br>
    <br>
    <a href="http://www.openscdp.org">OpenSCDP</a><br>
</div>

<div id="main">
<!-- #BeginEditable "BODY" -->
      <h2>Build-in Shell Commands</h2>
        <p>The full potential of the shell can be explored using JavaScript expressions,
           which are evaluated immediately. Only a few commands are provided by the shell
           object, whereas the majority of functions are in the scripting classes.</p>
        <h3>help</h3>
        <p>Display a short help in interactive mode</p>
        <h3>q | quit</h3>
        <p>Terminate shell.</p>
        <h3>r | reset</h3>
        <p>Reset card in reader and display Answer to Reset returned by card.</p>
        <h3>a | apdu(String apdu)</h3>
        <p>Send APDU to card. The argument apdu must be a string that
           contains in hexadecimal encoding the concatenation of CLA|INS|P1|P2|Lc|Data|Le</p>
        <h3>print(...)</h3>
        <p>All arguments passed to the print() function are converted using the
           toString() method and are concatenated with a trailing blank. The resulting
           string is printed with a '\n' appended.</p>
        <p>If the object is of type ByteString, then a hexadecimal dump is generated.</p>
        <h3>load(String filename)</h3>
        <p>Load, compile and execute ECMA script.</p>
        <p>Unless an absolute file name is given, the path is relative to the location
           of the script in which the function is called. See <a href="filelocation.html">Locating Files</a>
           for details.</p>
        <h3>defineClass(String classfilename)</h3>
        <p>Load Java class file and define new ECMA class constructor in script runtime.
           The Java class must be derived from org.mozilla.javascript.ScriptableObject.</p>
        <h3>assert(...)</h3>
        <p>Each argument in turn is evaluated. If the result is false, then an
           exception is thrown. This is usefull for test script.</p>
      <h2>Extending Shell Commands</h2>
        <p>When an expression entered on the command line is evaluated to
           be a function and no arguments are given, then the function is called
           with the result of the last evaluation. Shell commands
           can therefore be extended by simply defining a function in ECMA Script
           (e.g. as part of a startup script).</p>
        <p>Example: Define a function do()</p>
<pre>function mydo(last) {
  print("mydo() called with " + last);
}</pre>
        <p>Now when you enter "mydo" in the shell, this evaluates to a function object, which is then called
           with the result of the last evaluation.</p>
<pre>&gt;"Hello World";
Hello World
&gt;mydo
mydo() called with Hello World
&gt;
</pre>

<!-- #EndEditable -->
<br>
<p class="copyright">&copy; Copyright 2003 - 2010 <a href="http://www.cardcontact.de">CardContact</a>
Software & System Consulting, Minden, Germany</p>
</div>

</body>
</html><!-- #EndTemplate -->