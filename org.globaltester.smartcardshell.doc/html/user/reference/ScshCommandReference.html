<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Smart Card Shell command reference</title>
</head>
<body>
	
	<h1>Smart Card Shell command reference</h1>
	
	<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        <p>Not all execution environments (e.g. the legacy script runner) support the following functionalities.</p>
    </div>
	
	<p>The script tags within test
		specifications use the SmartCardShell provided by CardContact as
		execution environment. The Smart Card Shell uses JavaScript as command
		and script language provided by the Mozilla Rhino Engine.</p>
	<p>
		Several GlobalPlatform and OpenSCDP scripting classes are already
		included. These are well documented by the authors at <a
			href="http://www.openscdp.org/scsh3/">http://www.openscdp.org/scsh3/</a>.
	</p>
	<p>
		Additionally secunet extends instances of the
		<code>Card</code>
		class with special methods to allow easier access to commands and
		protocols. Which commands and protocols you can use depends on the set
		of available plug-ins. Each plug-in providing additional functionality
		also extends this help section and you will find a description of the
		available commands in the subsections of this chapter.
	</p>
	<p>
		In general GlobalTester extends the functionality using methods and
		fields using the form of
		<code>card.gt_&lt;protocol&gt;_&lt;method&gt;(param, param,
			...)</code>
		. Details on parameters, return values etc. can be found in the
		corresponding sections of this documentation.
	</p>
	<p>Additionally there are a few methods in the card object that are
		not directly associated with a protocol. These add GlobalTester
		specific logging for APDU transfer and some shortcuts for handling of
		secure messaging.</p>

	<h2>Command summary</h2>
	<table>
		<tr>
			<td><a href="#gt_reset"><code>card.gt_reset()</code> </a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perform
				a cold reset on the card.</td>
		</tr>
		<tr>
			<td><a href="#gt_sendPlain"><code>card.gt_sendPlain(cmdAPDU)</code>
			</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send an APDU to the card and
				receive the response.</td>
		</tr>
		<tr>
			<td><a
				href="scshprotocols/SecureMessaging.html#gt_SecureMessaging_sendSM"><code>card.gt_sendSM(cmdAPDU)</code>
			</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Shortcut for <a
				href="scshprotocols/SecureMessaging.html#gt_SecureMessaging_sendSM">card.gt_SecureMessagign_sendSM()</a>.
				Wraps the given plain APDU in valid secure messaging, transmits
				SM-APDU to the card and processes the response</td>
		</tr>
		<tr>
			<td><a
				href="scshprotocols/SecureMessaging.html#gt_SecureMessaging_sendCommand"><code>card.gt_sendCommand(cmdAPDU)</code>
			</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Shortcut for <a
				href="scshprotocols/SecureMessaging.html#gt_SecureMessaging_sendSM">card.gt_SecureMessagign_sendCommand()</a>.
				Sends an APDU to the card, depending on the current state of
				secure messaging SM is used or not.</td>
		</tr>
	</table>
	<h2>Command details</h2>
	<h3>
		<a name="gt_reset">reset</a>
	</h3>
	<code>card.gt_reset()</code>
	<p>Perform a cold reset on the card and reset secure messaging
		state.</p>
	<p>
		<b>Returns:</b><br />ATR as returned by the card
	</p>
	<hr />
	<h3>
		<a name="gt_sendPlain">sendPlain</a>
	</h3>
	<code>card.gt_sendPlain(cmdAPDU)</code>
	<p>
		Send an APDU to the card and receive the response. The APDU and the
		response are logged within GlobalTester logging mechanisms. <br />
		Beside logging the call is forwarded to the original card.sendPlain,
		which transmits the APDU, receives the response and updates fields of
		the card object. The fields SW, SW1, SW2 and response are updated with
		the values returned by card.
	</p>
	<p>
		<b>Parameters:</b><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<code>cmdAPDU</code>
		- ByteString(byte[]) containing the plain CommandAPDU to be
		transmitted<br />
	</p>
	<p>
		<b>Returns:</b><br />Response as returned by the card
	</p>
	<hr />

</body>
</html>