<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
 Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="TestRunner.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b></b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>TestRunner.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		No overview generated for 'TestRunner.js'<BR/><BR/>
	
</p>

<hr>


    <table border="1" cellpadding="3" cellspacing="0" width="100%">
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
    <td colspan=2><font size="+2">
    
        <b>Class Summary</b>
    
    </font></td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="TestCaseRunner.html">TestCaseRunner</a></b></td>
    <td>&nbsp;</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="TestGroupRunner.html">TestGroupRunner</a></b></td>
    <td>&nbsp;</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="TestLogFile.html">TestLogFile</a></b></td>
    <td>&nbsp;</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="TestProcedureRunner.html">TestProcedureRunner</a></b></td>
    <td>&nbsp;</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="TestRunner.html">TestRunner</a></b></td>
    <td>&nbsp;</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="TestStepRunner.html">TestStepRunner</a></b></td>
    <td>&nbsp;</td>
    </tr>
    
    </table>
    <hr/> 


<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">//</span>
<span class="comment">//  ---------</span>
<span class="comment">// |.##&gt; &lt;##.|  Open Smart Card Development Platform (www.openscdp.org)</span>
<span class="comment">// |#       #|  </span>
<span class="comment">// |#       #|  Copyright (c) 1999-2006 CardContact Software &amp; System Consulting</span>
<span class="comment">// |'##&gt; &lt;##'|  Andreas Schwier, 32429 Minden, Germany (www.cardcontact.de)</span>
<span class="comment">//  --------- </span>
<span class="comment">//</span>
<span class="comment">//  This file is part of OpenSCDP.</span>
<span class="comment">//</span>
<span class="comment">//  OpenSCDP is free software; you can redistribute it and/or modify</span>
<span class="comment">//  it under the terms of the GNU General Public License as published by</span>
<span class="comment">//  the Free Software Foundation; either version 2 of the License, or</span>
<span class="comment">//  (at your option) any later version.</span>
<span class="comment">//</span>
<span class="comment">//  OpenSCDP is distributed in the hope that it will be useful,</span>
<span class="comment">//  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="comment">//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="comment">//  GNU General Public License for more details.</span>
<span class="comment">//</span>
<span class="comment">//  You should have received a copy of the GNU General Public License</span>
<span class="comment">//  along with OpenSCDP; if not, write to the Free Software</span>
<span class="comment">//  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
<span class="comment">//</span>
<span class="comment">//  Simple test runner framework</span>

<span class="comment">// defineClass("de.cardcontact.scdp.scsh3.OutlineNode");</span>




<span class="comment">// ---------------------------</span>
<span class="comment">// Create a test runner object</span>
<span class="comment">//</span>
<span class="reserved">function</span> TestRunner(name) {

	<span class="reserved">this</span>.name = name;
	<span class="reserved">this</span>.testGroupRunners = new Array();
	<span class="reserved">this</span>.testProcedures = new Array();
	<span class="reserved">this</span>.testMapper = new Array();
	<span class="reserved">this</span>.testGroupPrototype = new TestGroup();
	<span class="reserved">this</span>.testProcedurePrototype = new TestProcedure();
	
	<span class="comment">// Create root node and set as view</span>
	var view = new OutlineNode(name, true);
	view.setContextMenu([<span class="literal">"run"</span>, <span class="literal">"clear"</span>]);
	view.setUserObject(<span class="reserved">this</span>);
	<span class="reserved">this</span>.view = view;

	view.show();
}



<span class="comment">//</span>
<span class="comment">// Event listener for actions selected from context menu</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.actionListener = <span class="reserved">function</span>(source, actionName) {
	switch(actionName) {
	case <span class="literal">"run"</span> :
		<span class="reserved">this</span>.run();
		break;
	case <span class="literal">"clear"</span> :
		<span class="reserved">this</span>.clearResults();
		break;
	}
}



<span class="comment">//</span>
<span class="comment">// Add a test group to the test runner</span>
<span class="comment">// This will iterate through all test cases and locate used procedures and steps</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.addTestGroup = <span class="reserved">function</span>(testGroup) {
	var tgrs = <span class="reserved">this</span>.testGroupRunners;
	
	tgr = new TestGroupRunner(<span class="reserved">this</span>, testGroup);

	tgrs.push(tgr);

	var view = <span class="reserved">this</span>.view;	
	view.insert(tgr.view);
}



<span class="comment">//</span>
<span class="comment">// Create test group from XML file and add to test runner</span>
<span class="comment">// </span>
TestRunner.<span class="reserved">prototype</span>.addTestGroupFromXML = <span class="reserved">function</span> (file, parameter) {
	<span class="comment">// Parse XML file.</span>
	var parser = new GPXML();
	parser.defineArrayElement(<span class="literal">"/testgroup"</span>, <span class="literal">"testcase,function"</span>, <span class="literal">"id,Name"</span>);
	parser.defineArrayElement(<span class="literal">"/testgroup/testcase/procedures"</span>, <span class="literal">"procedure"</span>);
	var xml = parser.parse(file);

	<span class="comment">// Determine CTOR function</span>
	var ctor = xml.constructor.Script;
	<span class="reserved">if</span> (!ctor) {
		<span class="comment">// Use a default constructor unless defined in XML profile</span>
		ctor = <span class="reserved">function</span>(name, parameter) { TestGroup.call(<span class="reserved">this</span>, name, parameter); };
	}
	
	<span class="comment">// Make CTOR available in scope object</span>
	<span class="comment">// this[xml.id] = ctor;</span>
	
	<span class="comment">// Set correct prototype object</span>
	ctor.<span class="reserved">prototype</span> = new TestGroup();
	ctor.<span class="reserved">prototype</span>.constructor = ctor;
	ctor.<span class="reserved">prototype</span>.usedProcedures = new Array();
	
	<span class="comment">// Add test cases to prototype object</span>
	var testcases = xml.testcase;
	<span class="reserved">for</span> (var i in testcases) {
		<span class="reserved">if</span> (i != <span class="literal">"arrayIndex"</span>) {
			var s = testcases[i].Script;
			ctor.<span class="reserved">prototype</span>[<span class="literal">"case"</span> + i] = s;
			<span class="reserved">if</span> (testcases[i].procedures) {
				var procedures = testcases[i].procedures.procedure;
				ctor.<span class="reserved">prototype</span>.usedProcedures[i] = new Array();
				
				<span class="reserved">for</span> (var p = 0; p &lt; procedures.length; p++) {
					ctor.<span class="reserved">prototype</span>.usedProcedures[i].push(procedures[p].id);
				}
			}
		}
	}
	
	<span class="comment">// Add setup function to prototype object</span>
	<span class="reserved">if</span> (xml.setup) {
		ctor.<span class="reserved">prototype</span>[<span class="literal">"setUp"</span>] = xml.setup.Script;
	}
	
	<span class="comment">// Add teardown function to prototype object</span>
	<span class="reserved">if</span> (xml.teardown) {
		ctor.<span class="reserved">prototype</span>[<span class="literal">"tearDown"</span>] = xml.teardown.Script;
	}
	
	<span class="comment">// Add functions to prototype object</span>
	var functions = xml[<span class="literal">"function"</span>];
	<span class="reserved">for</span> (var i in functions) {
		<span class="reserved">if</span> (i != <span class="literal">"arrayIndex"</span>) {
			var s = functions[i].Script;
			ctor.<span class="reserved">prototype</span>[i] = s;
		}
	}
	
	ctor.XML = xml;
	
	var tc = new ctor(xml.id, parameter);
	
	<span class="reserved">this</span>.addTestGroup(tc);
}



<span class="comment">//</span>
<span class="comment">// Add a test procedure constructor to the list</span>
<span class="comment">// Use the getName() method to obtain the test procedure name</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.addTestProcedure = <span class="reserved">function</span>(proc) {
	var name = proc.getName();
	<span class="reserved">if</span> (name) {
		<span class="reserved">this</span>.testProcedures[name] = proc;
	}
}



<span class="comment">//</span>
<span class="comment">// Create test procedure from XML file and add to test runner</span>
<span class="comment">// </span>
TestRunner.<span class="reserved">prototype</span>.addTestProcedureFromXML = <span class="reserved">function</span> (file, parameter) {
	<span class="comment">// Parse XML file.</span>
	var parser = new GPXML();
	parser.defineArrayElement(<span class="literal">"/testprocedure"</span>, <span class="literal">"teststep,function"</span>, <span class="literal">"id,Name"</span>);
	var xml = parser.parse(file);

	<span class="comment">// Determine CTOR function</span>
	var ctor = xml.constructor.Script;
	<span class="reserved">if</span> (!ctor) {
		<span class="comment">// Use a default constructor unless defined in XML profile</span>
		ctor = <span class="reserved">function</span>(testgroup, name, parameter) { TestProcedure.call(<span class="reserved">this</span>, testgroup, name, parameter); };
	}

	<span class="comment">// Make CTOR available in scope object</span>
	<span class="comment">// this[xml.id] = ctor;</span>
	
	<span class="comment">// Set correct prototype object</span>
	ctor.<span class="reserved">prototype</span> = new TestProcedure();
	ctor.<span class="reserved">prototype</span>.constructor = ctor;
	var teststeps = xml.teststep;
	<span class="reserved">for</span> (var i in teststeps) {
		<span class="reserved">if</span> (i != <span class="literal">"arrayIndex"</span>) {
			var s = teststeps[i].Script;
			ctor.<span class="reserved">prototype</span>[<span class="literal">"step"</span> + i] = s;
		}
	}
	<span class="reserved">if</span> (xml.setup) {
		ctor.<span class="reserved">prototype</span>[<span class="literal">"setUp"</span>] = xml.setup.Script;
	}
	<span class="reserved">if</span> (xml.teardown) {
		ctor.<span class="reserved">prototype</span>[<span class="literal">"tearDown"</span>] = xml.teardown.Script;
	}
	
	<span class="comment">// Add functions to prototype object</span>
	var functions = xml[<span class="literal">"function"</span>];
	<span class="reserved">for</span> (var i in functions) {
		<span class="reserved">if</span> (i != <span class="literal">"arrayIndex"</span>) {
			var s = functions[i].Script;
			ctor.<span class="reserved">prototype</span>[i] = s;
		}
	}

	ctor.XML = xml;
	ctor.getName = <span class="reserved">function</span>() { <span class="reserved">return</span> xml.id; };	

	<span class="reserved">this</span>.testProcedures[xml.id] = ctor;
}



<span class="comment">//</span>
<span class="comment">// Return constructor of test procedure</span>
<span class="comment">// </span>
TestRunner.<span class="reserved">prototype</span>.getTestProcedure = <span class="reserved">function</span>(name) {
	<span class="reserved">return</span> <span class="reserved">this</span>.testProcedures[name];
}



<span class="comment">//</span>
<span class="comment">// Add test to test mapper, which maps test unique id to listening object</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.addTest = <span class="reserved">function</span>(name, listener) {
	<span class="reserved">this</span>.testMapper[name] = listener;
}



<span class="comment">//</span>
<span class="comment">// Run all test groups</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.run = <span class="reserved">function</span>() {
	<span class="reserved">for</span> (var i = 0; i &lt; <span class="reserved">this</span>.testGroupRunners.length; i++) {
		var testGroupRunner = <span class="reserved">this</span>.testGroupRunners[i];
		testGroupRunner.run();
	}
}



<span class="comment">//</span>
<span class="comment">// Clear result of last test run</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.clearResults = <span class="reserved">function</span>() {
	<span class="reserved">for</span> (var i in <span class="reserved">this</span>.testMapper) {
		var listener = <span class="reserved">this</span>.testMapper[i];
		<span class="reserved">if</span> (listener) {
			listener.clearResult();
		}
	}
}



<span class="comment">//</span>
<span class="comment">// Enable or disable test</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.enable = <span class="reserved">function</span>(name, state) {
	var listener = <span class="reserved">this</span>.testMapper[name];
	<span class="reserved">if</span> (listener &amp;&amp; listener.enable) {
		<span class="reserved">return</span> listener.enable(state);
	} <span class="reserved">else</span> {
		throw new GPError(<span class="literal">"TestRunner"</span>, GPError.OBJECT_NOT_FOUND, 0, name);
	}
}



<span class="comment">//</span>
<span class="comment">// isEnabled query from TestGroup runner</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.isEnabled = <span class="reserved">function</span>(name) {
	var listener = <span class="reserved">this</span>.testMapper[name];
	<span class="reserved">if</span> (listener) {
		<span class="reserved">return</span> listener.isEnabled();
	}
	<span class="reserved">return</span> true;
}



<span class="comment">//</span>
<span class="comment">// hasPassed Listener</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.hasPassed = <span class="reserved">function</span>(name, log) {
	var listener = <span class="reserved">this</span>.testMapper[name];
	<span class="reserved">if</span> (listener) {
		listener.hasPassed(log);
	} <span class="reserved">else</span> {
		print(<span class="literal">"No receiver for passed notification : "</span> + name);
		<span class="reserved">for</span> (var i in <span class="reserved">this</span>.testMapper) {
			print(<span class="literal">"- "</span> + i);
		}
	}
}



<span class="comment">//</span>
<span class="comment">// hasFailed Listener</span>
<span class="comment">//</span>
TestRunner.<span class="reserved">prototype</span>.hasFailed = <span class="reserved">function</span>(name, log) {
	var listener = <span class="reserved">this</span>.testMapper[name];
	<span class="reserved">if</span> (listener) {
		listener.hasFailed(log);
	}
}



<span class="comment">// ----------------------------------------</span>
<span class="comment">// Constructor for a TestGroupRunner object</span>
<span class="comment">//</span>
<span class="reserved">function</span> TestGroupRunner(testRunner, testGroup) {
	<span class="reserved">this</span>.testRunner = testRunner;
	<span class="reserved">this</span>.testGroup = testGroup;
	
	var view = new OutlineNode(testGroup.getName());
	view.setContextMenu([<span class="literal">"run"</span>]);
	view.setUserObject(<span class="reserved">this</span>);
	
	<span class="reserved">this</span>.view = view;

	var testcases = testGroup.getTestCaseNames();
	
	<span class="reserved">for</span> (var i = 0; i &lt; testcases.length; i++) {
		var tcr = new TestCaseRunner(<span class="reserved">this</span>, testcases[i]);
		view.insert(tcr.view);
	}
}



<span class="comment">//</span>
<span class="comment">// Event listener for context menu</span>
<span class="comment">//</span>
TestGroupRunner.<span class="reserved">prototype</span>.actionListener = <span class="reserved">function</span>(source, action) {
	switch(action) {
	case <span class="literal">"run"</span> : 
		<span class="reserved">this</span>.run();
		break;
	}
}



<span class="comment">//</span>
<span class="comment">// run this test group</span>
<span class="comment">//</span>
TestGroupRunner.<span class="reserved">prototype</span>.run = <span class="reserved">function</span>() {
	var test = <span class="reserved">this</span>.testGroup;
	
	test.run(<span class="reserved">this</span>.testRunner);
}




<span class="comment">// ---------------------------------------</span>
<span class="comment">// Constructor for a TestCaseRunner object</span>
<span class="comment">//</span>
<span class="reserved">function</span> TestCaseRunner(testGroupRunner, testCase) {
	<span class="reserved">this</span>.testGroupRunner = testGroupRunner;
	<span class="reserved">this</span>.testCase = testCase;
	<span class="reserved">this</span>.selected = true;

	var testRunner = testGroupRunner.testRunner;
	testRunner.addTest(testGroupRunner.testGroup.getName() + <span class="literal">"/"</span> + testCase, <span class="reserved">this</span>);
			
	var view = new OutlineNode(testCase);
	view.setUserObject(<span class="reserved">this</span>);
	view.setIcon(<span class="literal">"selected"</span>);
	view.setContextMenu([<span class="literal">"select"</span>, <span class="literal">"deselect"</span>, <span class="literal">"run"</span>]);
	<span class="reserved">this</span>.view = view;

	var testGroup = testGroupRunner.testGroup;
		
	var testprocedures = testGroup.getUsedTestProceduresForTestCase(testCase);
	
	<span class="reserved">if</span> (testprocedures) {
		<span class="reserved">for</span> (var i = 0; i &lt; testprocedures.length; i++) {
			var tpr = new TestProcedureRunner(<span class="reserved">this</span>, testprocedures[i]);
			view.insert(tpr.view);
		}
	}
}



<span class="comment">//</span>
<span class="comment">// Action listener for context menu</span>
<span class="comment">//</span>
TestCaseRunner.<span class="reserved">prototype</span>.actionListener = <span class="reserved">function</span>(source, actionName) {
	print(<span class="literal">"Action "</span> + actionName);
	switch(actionName) {
	case <span class="literal">"select"</span>:
		<span class="reserved">this</span>.selected = true;
		source.setIcon(<span class="literal">"selected"</span>);
		break;
	case <span class="literal">"deselect"</span>:
		<span class="reserved">this</span>.selected = false;
		source.setIcon(<span class="literal">"deselected"</span>);
		break;
	case <span class="literal">"run"</span>:
		<span class="reserved">this</span>.run();
		break;
	}
}



<span class="comment">//</span>
<span class="comment">// Run this test case</span>
<span class="comment">//</span>
TestCaseRunner.<span class="reserved">prototype</span>.run = <span class="reserved">function</span>() {
	var test = <span class="reserved">this</span>.testGroupRunner.testGroup;
	
	test.runTestCase(<span class="reserved">this</span>.testCase, <span class="reserved">this</span>.testGroupRunner.testRunner);
}



<span class="comment">//</span>
<span class="comment">// Tell test runner if case is enabled</span>
<span class="comment">//</span>
TestCaseRunner.<span class="reserved">prototype</span>.isEnabled = <span class="reserved">function</span>() {
	<span class="reserved">return</span> <span class="reserved">this</span>.selected;
}



<span class="comment">//</span>
<span class="comment">// Add a log entry to the test case node</span>
<span class="comment">//</span>
TestCaseRunner.<span class="reserved">prototype</span>.addLog = <span class="reserved">function</span>(log) {
	var view = <span class="reserved">this</span>.view;
	var lognode = new TestLogFile(<span class="reserved">this</span>, log);
	<span class="reserved">this</span>.log = lognode;
	view.insert(lognode.view);
}



<span class="comment">//</span>
<span class="comment">// Listener for passed notifications</span>
<span class="comment">// </span>
TestCaseRunner.<span class="reserved">prototype</span>.hasPassed = <span class="reserved">function</span>(log) {
	<span class="reserved">this</span>.failed = false;
	var view = <span class="reserved">this</span>.view;
	view.setIcon(<span class="literal">"passed"</span>);
	<span class="reserved">this</span>.addLog(log);
}



<span class="comment">//</span>
<span class="comment">// Listener for failed notifications</span>
<span class="comment">// </span>
TestCaseRunner.<span class="reserved">prototype</span>.hasFailed = <span class="reserved">function</span>(log) {
	<span class="reserved">this</span>.failed = true;
	var view = <span class="reserved">this</span>.view;
	view.setIcon(<span class="literal">"failed"</span>);
	<span class="reserved">this</span>.addLog(log);
}



<span class="comment">//</span>
<span class="comment">// Clear result of test</span>
<span class="comment">//</span>
TestCaseRunner.<span class="reserved">prototype</span>.clearResult = <span class="reserved">function</span>() {
	<span class="reserved">this</span>.failed = false;
	var view = <span class="reserved">this</span>.view;
	<span class="reserved">if</span> (<span class="reserved">this</span>.selected) {
		view.setIcon(<span class="literal">"selected"</span>);
	} <span class="reserved">else</span> {
		view.setIcon(<span class="literal">"deselected"</span>);
	}
}




<span class="comment">//</span>
<span class="comment">// Enable or disable test</span>
<span class="comment">//</span>
TestCaseRunner.<span class="reserved">prototype</span>.enable = <span class="reserved">function</span>(state) {
	var view = <span class="reserved">this</span>.view;
	<span class="reserved">this</span>.selected = state;
	<span class="reserved">if</span> (<span class="reserved">this</span>.selected) {
		view.setIcon(<span class="literal">"selected"</span>);
	} <span class="reserved">else</span> {
		view.setIcon(<span class="literal">"deselected"</span>);
	}
}




<span class="comment">//</span>
<span class="comment">// Constructor for test log entry in outline</span>
<span class="comment">//</span>
<span class="reserved">function</span> TestLogFile(parent, log) {
	<span class="reserved">this</span>.log = log;
	
	var view = new OutlineNode(<span class="literal">"Log from "</span> + Date());
	<span class="reserved">this</span>.view = view;
	view.setUserObject(<span class="reserved">this</span>);
}



<span class="comment">//</span>
<span class="comment">// Listener for node selection - Display log</span>
<span class="comment">//</span>
TestLogFile.<span class="reserved">prototype</span>.selectedListener = <span class="reserved">function</span>() {
	print(<span class="literal">"--------------------------------------------------------------------------------"</span>);
	print(<span class="reserved">this</span>.log);
}



<span class="comment">// --------------------------------------------</span>
<span class="comment">// Constructor for a TestProcedureRunner object</span>
<span class="comment">//</span>
<span class="reserved">function</span> TestProcedureRunner(testCaseRunner, testProcedure) {
	<span class="reserved">this</span>.testCaseRunner = testCaseRunner;
	<span class="reserved">this</span>.testProcedure = testProcedure;
	
	var view = new OutlineNode(testProcedure);
	<span class="reserved">this</span>.view = view;

	var tp = <span class="reserved">this</span>.testCaseRunner.testGroupRunner.testRunner.testProcedures[testProcedure];

	<span class="reserved">if</span> (tp) {
		var list = new Array();
		<span class="reserved">for</span> (var i in tp.<span class="reserved">prototype</span>) {
			<span class="reserved">if</span> (i.substr(0, 4) == <span class="literal">"step"</span>) {
				var step = i.substr(4);
				list.push(step);
			}
		}

		list.sort();
		
		<span class="reserved">for</span> (var i = 0; i &lt; list.length; i++) {
			var tpsr = new TestStepRunner(<span class="reserved">this</span>, list[i]);
			view.insert(tpsr.view);
		}
	} <span class="reserved">else</span> {
		print(<span class="literal">"No test procedure implementation found for "</span> + testProcedure);
	}
}




<span class="comment">// ---------------------------------------</span>
<span class="comment">// Constructor for a TestStepRunner object</span>
<span class="comment">//</span>
<span class="reserved">function</span> TestStepRunner(testProcedureRunner, testStep) {
	<span class="reserved">this</span>.testProcedureRunner = testProcedureRunner;
	<span class="reserved">this</span>.testStep = testStep;
	
	var view = new OutlineNode(testStep);
	<span class="reserved">this</span>.view = view;

	var testCaseRunner = testProcedureRunner.testCaseRunner;	
	var testGroupRunner = testCaseRunner.testGroupRunner;
	var testRunner = testGroupRunner.testRunner;
	var testName = testGroupRunner.testGroup.getName() + <span class="literal">"/"</span> + 
	               testCaseRunner.testCase + <span class="literal">"/"</span> + 
	               testProcedureRunner.testProcedure + <span class="literal">"/"</span> +
	               testStep;
	               
	testRunner.addTest(testName, <span class="reserved">this</span>);
}



<span class="comment">//</span>
<span class="comment">// Receive passed notifications</span>
<span class="comment">//</span>
TestStepRunner.<span class="reserved">prototype</span>.hasPassed = <span class="reserved">function</span>() {
	var view = <span class="reserved">this</span>.view;
	view.setIcon(<span class="literal">"passed"</span>);
}



<span class="comment">//</span>
<span class="comment">// Clear test result display</span>
<span class="comment">//</span>
TestStepRunner.<span class="reserved">prototype</span>.clearResult = <span class="reserved">function</span>() {
	var view = <span class="reserved">this</span>.view;
	view.setIcon();
}

</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b></b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Fri Dec  3 18:14:23 2010</div>
</body>
</html>
