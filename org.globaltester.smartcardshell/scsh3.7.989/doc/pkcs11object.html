<!-- #BeginTemplate "template.dwt" -->
        <!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!-- #BeginEditable "TITLE" -->
                <title>PKCS11Object - Reference Documentation</title>
                    <!-- #EndEditable -->
<link rel=stylesheet type="text/css" href="style.css">
<meta name="author" content="Andreas Schwier">
</head>
<body>
<div align="left"><a href="http://www.cardcontact.de"><img src="banner.jpg" width="750" height="80" border="0"></a></div>
<div id="navigator">
    <p><b>Smart Card<br>Shell 3</b></p>
    <a href="index.html">Home</a><br><br>
    <a href="gperror.html">GPError</a><br>
    <a href="gpsystem.html">GPSystem</a><br>
    <a href="bytestring.html">ByteString</a><br>
    <a href="bytebuffer.html">ByteBuffer</a><br>
    <a href="tlv.html">TLV</a><br>
    <a href="tlvlist.html">TLVList</a><br>
    <a href="card.html">Card</a><br>
    <a href="atr.html">Atr</a><br>
    <a href="key.html">Key</a><br>
    <a href="crypto.html">Crypto</a><br>
    <a href="application.html">Application</a><br>
    <a href="gpapplication.html">GPApplication</a><br>
    <a href="gpsecuritydomain.html">GPSecDomain</a><br>
    <br>
    <a href="asn1.html">ASN1</a><br>
    <a href="cardfile.html">CardFile</a><br>
    <a href="isosecurechannel.html">IsoSecureChannel</a><br>
    <a href="applicationfactory.html">ApplFactory</a><br>
    <a href="gpxml.html">GPXML</a><br>
    <a href="jsscript.html">JsScript</a><br>
    <a href="cardsimulationadapter.html">CardSim</a><br>
    <br>
    <a href="x509.html">X509</a><br>
    <a href="crl.html">CRL</a><br>
    <a href="keystore.html">KeyStore</a><br>
    <a href="cmssigneddata.html">CMSSignedData</a><br>
    <a href="cmsgenerator.html">CMSGenerator</a><br>
    <a href="xmlsignature.html">XMLSignature</a><br>
    <a href="ocspquery.html">OCSPQuery</a><br>
    <a href="ldap.html">LDAP</a><br>
    <a href="soapconnection.html">SOAP</a><br>
    <a href="urlconnection.html">URLConnection</a><br>
    <br>
    <a href="pkcs11provider.html">PKCS11Provider</a><br>
    <a href="pkcs11session.html">PKCS11Session</a><br>
    <a href="pkcs11object.html">PKCS11Object</a><br>
    <br>
    <a href="outlinenode.html">OutlineNode</a><br>
    <a href="dialog.html">Dialog</a><br>
    <br>
    <a href="jsdoc/index.html">Tools</a><br>
    <br>
    <a href="http://www.openscdp.org">OpenSCDP</a><br>
</div>

<div id="main">
<!-- #BeginEditable "BODY" -->
                <h1>PKCS11Object - Reference Documentation</h1>
<p>Class implementing support for objects in cryptographic token with PKCS#11 interface</p>
<h2>Index of Methods</h2>
<ul>
<li>
<a href="#Constructor">PKCS11Object() constructor</a>
</li>
<li>
<a href="#getAttribute">getAttribute()</a>
</li>
<li>
<a href="#getNumberAttribute">getNumberAttribute()</a>
</li>
<li>
<a href="#getBooleanAttribute">getBooleanAttribute()</a>
</li>
<li>
<a href="#destroy">destroy()</a>
</li>
</ul>
<h2>Constants</h2>
<table class="content">
<colgroup>
<col width="100">
<col width="200">
<col>
</colgroup>
<tr>
<th>Type</th><th>Name</th><th>Description</th>
</tr>
<tr>
<td>Number</td><td>CKO_DATA</td><td>PKCS#11 object class</td>
</tr>
<tr>
<td>Number</td><td>CKO_CERTIFICATE</td><td>PKCS#11 object class</td>
</tr>
<tr>
<td>Number</td><td>CKO_PUBLIC_KEY</td><td>PKCS#11 object class</td>
</tr>
<tr>
<td>Number</td><td>CKO_PRIVATE_KEY</td><td>PKCS#11 object class</td>
</tr>
<tr>
<td>Number</td><td>CKO_SECRET_KEY</td><td>PKCS#11 object class</td>
</tr>
<tr>
<td>Number</td><td>CKO_HW_FEATURE</td><td>PKCS#11 object class</td>
</tr>
<tr>
<td>Number</td><td>CKO_DOMAIN_PARAMETERS</td><td>PKCS#11 object class</td>
</tr>
<tr>
<td>Number</td><td>CKO_MECHANISM</td><td>PKCS#11 object class</td>
</tr>
<tr>
<td>Number</td><td>CKA_CLASS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_TOKEN</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_PRIVATE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_LABEL</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_APPLICATION</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_VALUE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_OBJECT_ID</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_CERTIFICATE_TYPE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_ISSUER</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SERIAL_NUMBER</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SERIAL_NUMBER</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_OWNER</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_ATTR_TYPES</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_TRUSTED</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_CERTIFICATE_CATEGORY</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_JAVA_MIDP_SECURITY_DOMAIN</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_URL</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_HASH_OF_SUBJECT_PUBLIC_KEY</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_HASH_OF_ISSUER_PUBLIC_KEY</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_CHECK_VALUE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_KEY_TYPE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SUBJECT</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_ID</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SENSITIVE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_ENCRYPT</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_DECRYPT</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_WRAP</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_UNWRAP</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SIGN</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SIGN_RECOVER</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_VERIFY</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_VERIFY_RECOVER</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_DERIVE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_START_DATE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_END_DATE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_MODULUS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_MODULUS_BITS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_PUBLIC_EXPONENT</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_PRIVATE_EXPONENT</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_PRIME_1</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_PRIME_2</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_EXPONENT_1</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_EXPONENT_2</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_COEFFICIENT</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_PRIME</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SUBPRIME</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_BASE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_PRIME_BITS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SUB_PRIME_BITS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_VALUE_BITS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_VALUE_LEN</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_EXTRACTABLE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_LOCAL</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_NEVER_EXTRACTABLE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_ALWAYS_SENSITIVE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_KEY_GEN_MECHANISM</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_MODIFIABLE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_ECDSA_PARAMS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_EC_PARAMS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_EC_POINT</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_SECONDARY_AUTH</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_AUTH_PIN_FLAGS</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_ALWAYS_AUTHENTICATE</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKA_WRAP_WITH_TRUSTED</td><td>PKCS#11 attribute</td>
</tr>
<tr>
<td>Number</td><td>CKK_RSA</td><td>PKCS#11 key type</td>
</tr>
<tr>
<td>Number</td><td>CKK_ECDSA</td><td>PKCS#11 key type</td>
</tr>
<tr>
<td>Number</td><td>CKK_EC</td><td>PKCS#11 key type</td>
</tr>
<tr>
<td>Number</td><td>CKK_DES</td><td>PKCS#11 key type</td>
</tr>
<tr>
<td>Number</td><td>CKK_DES2</td><td>PKCS#11 key type</td>
</tr>
<tr>
<td>Number</td><td>CKK_DES3</td><td>PKCS#11 key type</td>
</tr>
</table>
<h2 id="Constructor">Constructor</h2>
<h3>Prototype</h3>
<p class="signature">PKCS11Object(PKCS11Session session)</p>
<h3>Description</h3>
            
<p>Create a PKCS#11 object within the given session using the provided
               list of attributes. The object is created in the selected token.</p>
	
<p>The constructor accepts an associative array of attributes. The key must be
               one of the PKCS11Object.CKA_xxx values. The value can be a number, a string,
               a ByteString or boolean value. At least the CKA_CLASS must be defined.</p>
        
<h3>Arguments</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="100">
<col>
</colgroup>
<tr>
<th>Type</th><th>Name</th><th>Description</th>
</tr>
<tr>
<td><code>PKCS11Session</code></td><td>session</td><td>Previously opened session with PKCS#11 device</td>
</tr>
</table>
<h3>Exceptions</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="200">
<col>
</colgroup>
<tr>
<th>Name</th><th>Value</th><th>Description</th>
</tr>
<tr>
<td>GPError</td><td>GPError.ARGUMENTS_MISSING</td><td>Too few arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_ARGUMENTS</td><td>Too many arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_TYPE</td><td>Type of argument is invalid for call</td>
</tr>
</table>
<h3>Example</h3>
<pre>

// var p = new PKCS11Provider("c:/programme/smart card bundle/opensc-pkcs11.dll");
var p = new PKCS11Provider("C:/usr/local/lsm/bin/lsmpkcs11.dll");

// Login as user in a read/write session
var s = new PKCS11Session(p, 1, true);
s.login("12345678");

var attr = new Array();

attr[PKCS11Object.CKA_CLASS] = PKCS11Object.CKO_SECRET_KEY;
attr[PKCS11Object.CKA_KEY_TYPE] = PKCS11Object.CKK_DES;
attr[PKCS11Object.CKA_LABEL] = "MyTestKey";
attr[PKCS11Object.CKA_TOKEN] = true;
attr[PKCS11Object.CKA_VALUE] = new ByteString("0101010101010101", HEX);

// Create object
var o = new PKCS11Object(s, attr);

</pre>
<h2 id="getAttribute">getAttribute()</h2>
<h3>Prototype</h3>
<p class="signature">ByteString getAttribute(Number attr)</p>
<h3>Description</h3>
	
<p>Return the requested attribute as ByteString</p>
        
<h3>Arguments</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="100">
<col>
</colgroup>
<tr>
<th>Type</th><th>Name</th><th>Description</th>
</tr>
<tr>
<td><code>Number</code></td><td>attr</td><td>One of the CKA_ attributes</td>
</tr>
</table>
<h3>Return</h3>
<table>
<colgroup>
<col width="100">
<col>
</colgroup>
<tr>
<td><code>ByteString</code></td><td>Value of attribute. null is returned if the attribute is not defined.</td>
</tr>
</table>
<h3>Exceptions</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="200">
<col>
</colgroup>
<tr>
<th>Name</th><th>Value</th><th>Description</th>
</tr>
<tr>
<td>GPError</td><td>GPError.ARGUMENTS_MISSING</td><td>Too few arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_ARGUMENTS</td><td>Too many arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_TYPE</td><td>Type of argument is invalid for call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.OBJECT_NOT_FOUND</td><td>The requested attribute can not be read</td>
</tr>
</table>
<h3>Example</h3>
<pre>

print("CKA_LABEL = " + o.getAttribute(PKCS11Object.CKA_LABEL).toString(ASCII));

</pre>
<h2 id="getNumberAttribute">getNumberAttribute()</h2>
<h3>Prototype</h3>
<p class="signature">Number getAttribute(Number attr)</p>
<h3>Description</h3>
	
<p>Return the requested attribute as Number</p>
        
<h3>Arguments</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="100">
<col>
</colgroup>
<tr>
<th>Type</th><th>Name</th><th>Description</th>
</tr>
<tr>
<td><code>Number</code></td><td>attr</td><td>One of the CKA_ attributes</td>
</tr>
</table>
<h3>Return</h3>
<table>
<colgroup>
<col width="100">
<col>
</colgroup>
<tr>
<td><code>Number</code></td><td>Value of attribute</td>
</tr>
</table>
<h3>Exceptions</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="200">
<col>
</colgroup>
<tr>
<th>Name</th><th>Value</th><th>Description</th>
</tr>
<tr>
<td>GPError</td><td>GPError.ARGUMENTS_MISSING</td><td>Too few arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_ARGUMENTS</td><td>Too many arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_TYPE</td><td>Type of argument is invalid for call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.OBJECT_NOT_FOUND</td><td>The requested attribute is not defined or can not be read</td>
</tr>
</table>
<h3>Example</h3>
<pre>

print("CKA_KEY_TYPE = " + o.getNumberAttribute(PKCS11Object.CKA_KEY_TYPE));

</pre>
<h2 id="getBooleanAttribute">getBooleanAttribute()</h2>
<h3>Prototype</h3>
<p class="signature">Boolean getBooleanAttribute(Number attr)</p>
<h3>Description</h3>
	
<p>Return the requested attribute as boolean value</p>
        
<h3>Arguments</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="100">
<col>
</colgroup>
<tr>
<th>Type</th><th>Name</th><th>Description</th>
</tr>
<tr>
<td><code>Number</code></td><td>attr</td><td>One of the CKA_ attributes</td>
</tr>
</table>
<h3>Return</h3>
<table>
<colgroup>
<col width="100">
<col>
</colgroup>
<tr>
<td><code>Boolean</code></td><td>Boolean value of attribute</td>
</tr>
</table>
<h3>Exceptions</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="200">
<col>
</colgroup>
<tr>
<th>Name</th><th>Value</th><th>Description</th>
</tr>
<tr>
<td>GPError</td><td>GPError.ARGUMENTS_MISSING</td><td>Too few arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_ARGUMENTS</td><td>Too many arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_TYPE</td><td>Type of argument is invalid for call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.OBJECT_NOT_FOUND</td><td>The requested attribute is not defined or can not be read</td>
</tr>
</table>
<h3>Example</h3>
<pre>

print("CKA_TOKEN = " + o.getBooleanAttribute(PKCS11Object.CKA_TOKEN));

</pre>
<h2 id="destroy">destroy()</h2>
<h3>Prototype</h3>
<p class="signature">void destroy()</p>
<h3>Description</h3>
            
<p>Destroy the object</p>
        
<h3>Return</h3>
<table>
<colgroup>
<col width="100">
<col>
</colgroup>
<tr>
<td><code></code></td><td></td>
</tr>
</table>
<h3>Exceptions</h3>
<table class="content">
<colgroup>
<col width="100">
<col width="200">
<col>
</colgroup>
<tr>
<th>Name</th><th>Value</th><th>Description</th>
</tr>
<tr>
<td>GPError</td><td>GPError.INVALID_ARGUMENTS</td><td>Too many arguments in call</td>
</tr>
<tr>
<td>GPError</td><td>GPError.DEVICE_ERROR</td><td>Error removing object</td>
</tr>
</table>
<h3>Example</h3>
<pre>

o.destroy();

</pre>
                    <!-- #EndEditable -->
<br>
<p class="copyright">&copy; Copyright 2003 - 2010 <a href="http://www.cardcontact.de">CardContact</a>
Software & System Consulting, Minden, Germany</p>
</div>

</body>
</html><!-- #EndTemplate -->
        
